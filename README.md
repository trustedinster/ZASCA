# ZASCA (Zero Agent Share Computer Administrator)

## ç®€ä»‹

ZASCAï¼ˆZero Agent Share Computer Administratorï¼‰æ˜¯ä¸€ä¸ªä¸éœ€è¦åœ¨å…±äº«è®¡ç®—æœºä¸Šé¢å¤–å®‰è£…è½¯ä»¶çš„å¤šæœºç®¡ç†å·¥å…·ã€‚å®ƒé‡‡ç”¨åŸºäºWinrmçš„è¿æ¥æ–¹å¼ï¼Œå¯ä»¥å®ç°å¯¹å¤šå°äº‘ç”µè„‘çš„ç»Ÿä¸€ç®¡ç†å’Œå¼€æˆ·æœåŠ¡ã€‚

## ç‰¹æ€§

- ğŸš€ **é›¶ä»£ç†éƒ¨ç½²**ï¼šé‡‡ç”¨Winrmè¿æ¥æ–¹å¼ï¼Œæ— éœ€åœ¨ä¸»æœºç«¯é¢å¤–å®‰è£…è½¯ä»¶
- ğŸ”’ **å®‰å…¨å¯é **ï¼šå€ŸåŠ©å¾®è½¯æˆç†Ÿçš„Winrmæ–¹æ¡ˆï¼Œä¸æ€•è¢«æ¶æ„ç”¨æˆ·å…³é—­
- ğŸŒ **å¤šæœºç®¡ç†**ï¼šæ”¯æŒä¸€æ§å¤šæ¶æ„ï¼Œå¯åŒæ—¶ç®¡ç†å¤šå°äº‘ç”µè„‘
- ğŸ’» **è·¨å¹³å°æ”¯æŒ**ï¼šWebç«¯å¯åœ¨èƒ½è¿è¡ŒPython 3.10ä»¥ä¸Šçš„ä»»æ„Linuxã€Windowsç‰ˆæœ¬ä¸Šä½¿ç”¨
- ğŸ”Œ **çµæ´»éƒ¨ç½²**ï¼šä¸»æœºç«¯åªéœ€ç«¯å£æ˜ å°„ï¼Œä¸å¼ºåˆ¶è¦æ±‚å…¬ç½‘IPv4
- ğŸ‘¥ **ç”¨æˆ·å¼€æˆ·ç³»ç»Ÿ**ï¼šæ”¯æŒç”¨æˆ·è‡ªåŠ©ç”³è¯·å’Œç®¡ç†å‘˜å®¡æ ¸æµç¨‹

## ç³»ç»Ÿæ¶æ„

### Webç«¯
- æä¾›ç½‘ç«™ä¾›ç”¨æˆ·æ³¨å†Œå¼€æˆ·
- åŸºäºDjangoæ¡†æ¶å®ç°
- æ”¯æŒPython 3.10+
- å¯éƒ¨ç½²åœ¨Linuxæˆ–Windowsç³»ç»Ÿä¸Š
- ä½¿ç”¨Winrmè¿æ¥åˆ°äº‘ç”µè„‘ç«¯

### äº‘ç”µè„‘ç«¯ï¼ˆä¸»æœºç«¯ï¼‰
- æ”¯æŒWindows Server 2016+
- æ”¯æŒWindows 10+
- éœ€é…ç½®WinrmæœåŠ¡
- éœ€è¦ç«¯å£æ˜ å°„åˆ°å…¬ç½‘æˆ–å†…ç½‘å¯è®¿é—®

## æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: Django 4.2+
- **æ•°æ®åº“**: PostgreSQL/MySQL
- **è¿œç¨‹è¿æ¥**: pywinrm
- **å‰ç«¯**: Bootstrap 5 + jQuery
- **å¼‚æ­¥ä»»åŠ¡**: Celery + Redis

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.10+
- PostgreSQL 12+ æˆ– MySQL 8.0+
- Redis 6.0+

### å®‰è£…æ­¥éª¤

1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/yourusername/ZASCA.git
cd ZASCA
```

2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows
```

3. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

4. é…ç½®ç¯å¢ƒå˜é‡
```bash
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“ã€Redisç­‰è¿æ¥ä¿¡æ¯
```

5. æ•°æ®åº“è¿ç§»
```bash
python manage.py makemigrations
python manage.py migrate
```

6. åˆ›å»ºè¶…çº§ç”¨æˆ·
```bash
python manage.py createsuperuser
```

7. å¯åŠ¨æœåŠ¡
```bash
python manage.py runserver
```

## ä½¿ç”¨æŒ‡å—

### é…ç½®äº‘ç”µè„‘ç«¯

1. åœ¨Windowsä¸»æœºä¸Šå¯ç”¨WinrmæœåŠ¡
```powershell
winrm quickconfig -q
winrm set winrm/config/client '@{TrustedHosts="*"}'
```

2. é…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œå…è®¸Winrmç«¯å£ï¼ˆé»˜è®¤5985/5986ï¼‰

3. åœ¨Webç«¯æ·»åŠ ä¸»æœºä¿¡æ¯

### ç”¨æˆ·å¼€æˆ·ç³»ç»Ÿ

#### ç³»ç»Ÿæ¦‚è¿°
ZASCA ç”¨æˆ·å¼€æˆ·ç³»ç»Ÿæ˜¯ä¸€ä¸ªä¸ºäº‘ç”µè„‘ç”¨æˆ·åˆ›å»ºè´¦æˆ·å¹¶åœ¨ç›®æ ‡ä¸»æœºä¸Šåˆ›å»ºç›¸åº”ç”¨æˆ·çš„åŠŸèƒ½ã€‚ç³»ç»Ÿåˆ©ç”¨WinRMåè®®è¿æ¥åˆ°äº‘ç”µè„‘ä¸»æœºï¼Œåœ¨ç›®æ ‡æœºå™¨ä¸Šåˆ›å»ºç”¨æˆ·è´¦æˆ·ï¼Œå®ç°äº†é›¶ä»£ç†çš„å¤šæœºç®¡ç†ã€‚

#### æ ¸å¿ƒæ¨¡å‹
- **AccountOpeningRequest (å¼€æˆ·ç”³è¯·æ¨¡å‹)**: è®°å½•ç”¨æˆ·æäº¤çš„å¼€æˆ·ç”³è¯·ä¿¡æ¯
  - ç”³è¯·äººä¿¡æ¯ (applicant, contact_email, contact_phone)
  - å¼€æˆ·ä¿¡æ¯ (username, user_fullname, user_email, user_description)
  - ç›®æ ‡ä¸»æœº (target_host)
  - å®¡æ ¸ä¿¡æ¯ (status, approved_by, approval_date, approval_notes)
  - ç»“æœä¿¡æ¯ (cloud_user_id, cloud_user_password, result_message)

- **CloudComputerUser (äº‘ç”µè„‘ç”¨æˆ·æ¨¡å‹)**: è®°å½•åœ¨å„ä¸ªäº‘ç”µè„‘ä¸»æœºä¸Šåˆ›å»ºçš„ç”¨æˆ·ä¿¡æ¯
  - ç”¨æˆ·ä¿¡æ¯ (username, fullname, email, description)
  - ä¸»æœºä¿¡æ¯ (host, status, is_admin, groups)
  - åˆ›å»ºä¿¡æ¯ (created_from_request)

#### ç³»ç»Ÿæµç¨‹
1. **ç”³è¯·é˜¶æ®µ**: ç”¨æˆ·æäº¤å¼€æˆ·ç”³è¯·
2. **å®¡æ ¸é˜¶æ®µ**: ç®¡ç†å‘˜å®¡æ ¸ç”³è¯·
3. **å¤„ç†é˜¶æ®µ**: ç³»ç»Ÿè¿æ¥ç›®æ ‡ä¸»æœºå¹¶åˆ›å»ºç”¨æˆ·
4. **å®Œæˆé˜¶æ®µ**: è®°å½•ç»“æœå¹¶æ›´æ–°çŠ¶æ€

#### ç”¨æˆ·ç«¯åŠŸèƒ½
- **æäº¤å¼€æˆ·ç”³è¯·**: æ™®é€šç”¨æˆ·å¯ä»¥æäº¤å¼€æˆ·ç”³è¯·
- **æŸ¥çœ‹ç”³è¯·çŠ¶æ€**: æŸ¥çœ‹è‡ªå·±æäº¤çš„ç”³è¯·çŠ¶æ€

#### ç®¡ç†å‘˜åŠŸèƒ½
- **å®¡æ ¸ç”³è¯·**: æ‰¹å‡†æˆ–æ‹’ç»å¼€æˆ·ç”³è¯·
- **æ‰§è¡Œå¼€æˆ·**: åœ¨äº‘ç”µè„‘ä¸Šåˆ›å»ºç”¨æˆ·è´¦æˆ·
- **ç”¨æˆ·ç®¡ç†**: ç®¡ç†å·²åˆ›å»ºçš„äº‘ç”µè„‘ç”¨æˆ·
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡å®¡æ ¸å’Œç”¨æˆ·çŠ¶æ€ç®¡ç†

#### ä½¿ç”¨æµç¨‹
1. **æ™®é€šç”¨æˆ·ä½¿ç”¨æµç¨‹**
   - è®¿é—® "æäº¤å¼€æˆ·ç”³è¯·" é¡µé¢
   - å¡«å†™ç”³è¯·ä¿¡æ¯ (ç”¨æˆ·åã€å§“åã€é‚®ç®±ç­‰)
   - é€‰æ‹©ç›®æ ‡ä¸»æœº
   - æäº¤ç”³è¯·å¹¶ç­‰å¾…å®¡æ ¸
   - æŸ¥çœ‹ç”³è¯·çŠ¶æ€

2. **ç®¡ç†å‘˜ä½¿ç”¨æµç¨‹**
   - æŸ¥çœ‹å¾…å¤„ç†çš„å¼€æˆ·ç”³è¯·
   - å®¡æ ¸ç”³è¯·ä¿¡æ¯
   - æ‰¹å‡†æˆ–æ‹’ç»ç”³è¯·
   - å¯¹äºå·²æ‰¹å‡†çš„ç”³è¯·ï¼Œæ‰§è¡Œå¼€æˆ·æ“ä½œ
   - ç›‘æ§å¼€æˆ·ç»“æœ

#### URL è·¯å¾„
- `/operations/account-openings/` - å¼€æˆ·ç”³è¯·åˆ—è¡¨
- `/operations/account-openings/create/` - åˆ›å»ºå¼€æˆ·ç”³è¯·
- `/operations/account-openings/<id>/approve/` - æ‰¹å‡†ç”³è¯·
- `/operations/account-openings/<id>/reject/` - æ‹’ç»ç”³è¯·
- `/operations/account-openings/<id>/process/` - å¤„ç†å¼€æˆ·
- `/operations/cloud-users/` - äº‘ç”µè„‘ç”¨æˆ·åˆ—è¡¨

### ç”¨æˆ·å¼€æˆ·æµç¨‹

1. ç®¡ç†å‘˜åœ¨Webç«¯åˆ›å»ºå¼€æˆ·è¯·æ±‚
2. ç³»ç»Ÿé€šè¿‡Winrmè¿æ¥åˆ°ç›®æ ‡ä¸»æœº
3. åœ¨ä¸»æœºä¸Šåˆ›å»ºç”¨æˆ·è´¦æˆ·
4. é…ç½®ç”¨æˆ·æƒé™å’Œèµ„æºé™åˆ¶
5. è¿”å›å¼€æˆ·ç»“æœ

## é¡¹ç›®ç»“æ„

```
ZASCA/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ accounts/       # ç”¨æˆ·ç®¡ç†åº”ç”¨
â”‚   â”œâ”€â”€ hosts/          # ä¸»æœºç®¡ç†åº”ç”¨
â”‚   â”œâ”€â”€ operations/     # æ“ä½œè®°å½•åº”ç”¨ï¼ˆå«å¼€æˆ·ç³»ç»Ÿï¼‰
â”‚   â””â”€â”€ dashboard/      # ä»ªè¡¨ç›˜åº”ç”¨
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ static/             # é™æ€æ–‡ä»¶
â”œâ”€â”€ templates/          # æ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ manage.py
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## å®‰å…¨è¯´æ˜

1. ä½¿ç”¨HTTPSåŠ å¯†ä¼ è¾“
2. Winrmè¿æ¥ä½¿ç”¨SSLåŠ å¯†
3. å®æ–½ä¸¥æ ¼çš„è®¿é—®æ§åˆ¶
4. å®šæœŸå®¡è®¡æ“ä½œæ—¥å¿—
5. ä½¿ç”¨å¼ºå¯†ç ç­–ç•¥

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## è®¸å¯è¯

GNU GENERAL PUBLIC LICENSE Version 2

æœ¬è½¯ä»¶æ ¹æ®GPL 2.0è®¸å¯è¯å‘å¸ƒã€‚æ‚¨å¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘æœ¬è½¯ä»¶ï¼Œ
ä½†å¿…é¡»ä¿ç•™åŸå§‹ç‰ˆæƒå£°æ˜å’Œè®¸å¯è¯å£°æ˜ã€‚

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: https://github.com/trustedinster/ZASCA
- é—®é¢˜åé¦ˆ: https://github.com/trustedinster/ZASCA/issues