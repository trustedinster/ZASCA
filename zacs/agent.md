# ZASCA AI Agent 编码行为规范

## 总体原则

本规范旨在指导AI Agent在参与ZASCA项目开发时的行为，确保代码质量和项目一致性。

## 1. 代码风格与规范

### 1.1 Python代码规范
- 遵循PEP 8代码风格指南
- 使用4个空格缩进
- 变量和函数名使用snake_case命名法
- 类名使用CamelCase命名法
- 单行长度不超过88个字符
- 所有代码必须有适当的注释和文档字符串

### 1.2 Django特定规范
- 遵循Django的最佳实践
- Model、View、Form等组件遵循单一职责原则
- 使用Django ORM而非原生SQL
- 正确使用Django信号和中间件

### 1.3 前端代码规范
- HTML使用语义化标签
- CSS遵循BEM命名方法论
- JavaScript使用ES6+语法
- 遵循响应式设计原则

## 2. 项目结构遵循

### 2.1 应用划分
- accounts: 用户管理应用
- hosts: 主机管理应用（仅保留模型以供依赖，无实际页面功能）
- operations: 操作记录应用（已移除日志功能，保留任务和开户功能）
- dashboard: 仪表盘应用

### 2.2 文件组织
- 按照Django应用结构组织代码
- 模型定义在models.py
- 视图逻辑在views.py
- 表单定义在forms.py
- URL配置在urls.py

## 3. 安全考虑

### 3.1 输入验证
- 所有用户输入必须经过验证
- 使用Django表单进行数据验证
- 防止SQL注入、XSS攻击和CSRF攻击

### 3.2 权限控制
- 实施适当的权限验证
- 使用Django内置权限系统
- 敏感操作需二次确认

## 4. 代码质量要求

### 4.1 测试覆盖
- 新功能必须包含单元测试
- 修改现有功能需确保测试通过
- 重要逻辑需编写集成测试

### 4.2 文档
- 函数和类必须有文档字符串
- 复杂逻辑需添加注释
- API变更需更新相关文档

## 5. Git和协作规范

### 5.1 提交信息
- 使用清晰、简洁的提交信息
- 遵循"动词+对象"的格式
- 重大变更需添加详细说明

### 5.2 分支管理
- 功能开发在独立分支进行
- 主分支保持稳定
- PR需经过审查后合并

## 6. 版本控制

### 6.1 依赖管理
- 依赖项需记录在requirements.txt
- 依赖版本需固定以确保稳定性
- 新增依赖需说明理由

## 7. 部署与运维

### 7.1 配置管理
- 使用环境变量管理配置
- 敏感信息不得硬编码
- 配置需有合理的默认值

### 7.2 日志记录
- 重要操作需记录日志
- 日志格式需统一
- 敏感信息不得记录在日志中

## 8. AI特定指导原则

### 8.1 代码生成
- 生成的代码需符合项目规范
- 不得生成无用或冗余代码
- 保持代码可读性和可维护性

### 8.2 修改现有代码
- 修改前需充分理解代码功能
- 尽量保持原有代码风格
- 修改需最小化影响范围

## 9. 错误处理

### 9.1 异常处理
- 合理捕获和处理异常
- 不得静默忽略重要异常
- 提供有意义的错误信息

### 9.2 调试信息
- 调试代码使用日志而非print
- 生产环境不得输出过多调试信息
- 提供足够的上下文信息便于调试

## 10. 性能考虑

### 10.1 数据库查询
- 避免N+1查询问题
- 使用select_related和prefetch_related优化查询
- 合理使用数据库索引

### 10.2 前端性能
- 最小化HTTP请求数量
- 使用CDN加速静态资源
- 实施适当的缓存策略

---

本规范需定期审查和更新，以适应项目发展需求。